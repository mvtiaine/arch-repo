pkgname=audacious-uade
pkgver=0.13.1
pkgrel=1
pkgdesc="UADE plugin for Audacious and DeaDBeeF"
arch=('any')
url="https://github.com/mvtiaine/audacious-uade"
license=('GPL')
depends=('audacious' 'libopenmpt')
# libxmp and deadbeef in AUR
optdepends=(
    'libxmp: support for additional formats'
    'deadbeef: DeaDBeeF plugin'
)
makedepends=('which' 'make' 'pkg-config')
source=(https://github.com/mvtiaine/$pkgname/releases/download/$pkgver/$pkgname-$pkgver.tar.bz2)
sha256sums=('8f308dc9e5bdcc8bb6cc49dee9ce4acf93d20c02026fff9043975be3937fd393')

build() {
	cd "$srcdir/$pkgname-$pkgver"
	./configure \
		--enable-plugin-audacious=yes \
		--with-static-stdlibs=no \
		--prefix=/usr
	make -j
}

check() {
	cd "$srcdir/$pkgname-$pkgver"
	make -j check
}

package() {
	cd "$srcdir/$pkgname-$pkgver"
	make DESTDIR="$pkgdir/" install
}
